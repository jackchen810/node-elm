webpackJsonp([15],{532:function(t,a,e){e(952),e(954);var o=e(200)(e(956),e(957),null,null);t.exports=o.exports},952:function(t,a,e){var o=e(953);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e(199)("6f341e45",o,!0)},953:function(t,a,e){a=t.exports=e(87)(!1),a.push([t.i,".vue-datasource *{box-sizing:border-box;font-size:14px}.vue-datasource .panel{margin-bottom:22px;background-color:#fff;border:1px solid transparent;border-radius:4px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.vue-datasource .panel-default{border-color:#d3e0e9}.vue-datasource .panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-right-radius:3px;border-top-left-radius:3px}.vue-datasource .panel-default>.panel-heading{height:56px;color:#333;background-color:#fff;border-color:#d3e0e9}.vue-datasource .pull-left{float:left!important}.vue-datasource .pull-right{float:right!important}.vue-datasource .form-group{margin-bottom:15px}.vue-datasource label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}.vue-datasource .form-control{display:block;width:100%;height:36px;color:#555;background-color:#fff;border:1px solid #ccd0d2;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.vue-datasource .btn,.vue-datasource .form-control{padding:6px 12px;font-size:14px;line-height:1.6;background-image:none}.vue-datasource .btn{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;touch-action:manipulation;cursor:pointer;border:1px solid transparent;white-space:nowrap;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vue-datasource .btn-primary{color:#fff;background-color:#3097d1;border-color:#2a88bd}.vue-datasource .table{width:100%;max-width:100%;margin-bottom:22px;border-collapse:collapse;border-spacing:0;text-align:center}.vue-datasource .table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.vue-datasource .table td,.vue-datasource .table th{padding:8px;line-height:1.6;vertical-align:top;border-top:1px solid #ddd}.vue-datasource .table-striped>tbody>tr:nth-of-type(odd){background-color:#f9f9f9}.vue-datasource .success td,.vue-datasource .success th{background-color:#dff0d8}.vue-datasource .pagination{display:inline-block;padding-left:0;margin:22px 0;border-radius:4px}.vue-datasource .pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;line-height:1.6;text-decoration:none;color:#3097d1;background-color:#fff;border:1px solid #ddd;margin-left:-1px}.pagination>.disabled>a,.pagination>.disabled>a:focus,.pagination>.disabled>a:hover,.pagination>.disabled>span,.pagination>.disabled>span:focus,.pagination>.disabled>span:hover{color:#777;background-color:#fff;border-color:#ddd;cursor:not-allowed}.pagination>.active>a,.pagination>.active>a:focus,.pagination>.active>a:hover,.pagination>.active>span,.pagination>.active>span:focus,.pagination>.active>span:hover{z-index:3;color:#fff;background-color:#3097d1;border-color:#3097d1;cursor:default}.vue-datasource .pagination>li:first-child>a,.vue-datasource .pagination>li:first-child>span{margin-left:0;border-bottom-left-radius:4px;border-top-left-radius:4px}.vue-datasource .text-center{text-align:center}@media (min-width:768px){.form-inline .form-group{display:inline-block}.form-inline .control-label,.form-inline .form-group{margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}}",""])},954:function(t,a,e){var o=e(955);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e(199)("4de41bfb",o,!0)},955:function(t,a,e){a=t.exports=e(87)(!1),a.push([t.i,".rad-group{margin-bottom:20px}.handle-input{width:300px;display:inline-block}.handle-box2{display:inline-block;float:right}.orange{color:#eb9e05;background-color:none}.btn2{margin-bottom:5px;margin-left:0}.diainp{width:217px}.diainp2{width:400px}.inp80{width:80px}.inp100{width:100px}.inp120{width:120px}.inp150{width:140px}.inp160{width:160px}.inp180{width:180px}.nowrap{white-space:nowrap}.upload-demo .el-upload{cursor:pointer;position:relative;overflow:hidden}.upload-demo .el-upload:hover{border-color:#409eff}",""])},956:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{dialogFormVisible:!1,task_plan_list:[],download_file_list:[],form:{task_exce_time:new Date,task_plan_script:""},rules:{task_exce_time:[{required:!0,message:"请输入计划时间",trigger:"blur"}]},formLabelWidth:"100px",formLabelWidth50:"50px",fileList3:[],loading:!1,fullscreenLoading:!1,pageTotal:0,currentPage:1}},created:function(){this.getPlanFileList(),this.getTaskPlanList()},beforeDestroy:function(){this.tiemout&&(clearTimeout(this.tiemout),this.tiemout=""),console.log("destory")},methods:{getPlanFileList:function(){var t=this;t.loading=!0,t.$axios.post("/api/download/plan/file/list").then(function(a){t.loading=!1,0==a.data.ret_code?t.download_file_list=a.data.extra:console.log("resp:",a.data)})},getTaskPlanList:function(){var t=this;t.loading=!0,t.$axios.post("/api/download/plan/list").then(function(a){t.loading=!1,0==a.data.ret_code?t.task_plan_list=a.data.extra:console.log("resp:",a.data)})},saveAdd:function(t){var a=this,e={task_exce_time:a.form.task_exce_time,task_plan_script:a.form.task_plan_script};a.loading=!0,a.$axios.post("/api/download/plan/add",e).then(function(t){a.loading=!1,a.dialogFormVisible=!1,console.log(t),0==t.data.ret_code?(a.$message("添加成功"),a.getTaskPlanList()):a.$message("添加失败:"+t.data.extra)},function(t){a.$message("添加失败"),a.loading=!1,console.log(t)})},delTask:function(t){var a=this,e={task_id:t};a.loading=!0,a.$axios.post("/api/download/plan/del",e).then(function(t){a.loading=!1,0==t.data.ret_code?(a.$message("删除成功"),a.getTaskPlanList()):a.$message(t.data.extra)},function(t){a.$message("删除失败"),a.loading=!1,console.log(t)})},startTask:function(t){var a=this,e={task_id:t};a.loading=!0,a.$axios.post("/api/download/plan/start",e).then(function(t){a.loading=!1,0==t.data.ret_code?(a.$message("操作成功"),a.getTaskPlanList()):a.$message(t.data.extra)},function(t){a.$message("操作失败"),a.loading=!1,console.log(t)})},stopTask:function(t){var a=this,e={task_id:t};a.loading=!0,a.$axios.post("/api/download/plan/stop",e).then(function(t){a.loading=!1,0==t.data.ret_code?(a.$message("操作成功"),a.getTaskPlanList(),clearTimeout(a.updateTimer)):a.$message(t.data.extra)},function(t){a.$message("操作失败"),a.loading=!1,console.log(t)})},handleCurrentChange:function(t){this.cur_page=t,this.getTaskPlanList()}},computed:{}}},957:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table"},[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[e("i",{staticClass:"el-icon-star-on"}),t._v("历史数据")]),t._v(" "),e("el-breadcrumb-item",[t._v("下载任务列表")])],1)],1),t._v(" "),e("div",{staticClass:"handle-box rad-group"},[e("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(a){t.dialogFormVisible=!0}}},[t._v("添加计划任务")])],1),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.task_plan_list,border:""}},[e("el-table-column",{attrs:{type:"index",label:"ID",width:"60"}}),t._v(" "),e("el-table-column",{attrs:{prop:"task_id",label:"任务ID",width:"220"}}),t._v(" "),e("el-table-column",{attrs:{prop:"task_script",label:"任务名称",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"task_exce_time",label:"执行时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"task_status",label:"运行状态"}}),t._v(" "),e("el-table-column",{attrs:{prop:"create_at",label:"创建时间",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"btn1",attrs:{type:"text",size:"small"},on:{click:function(e){t.delTask(a.row.task_id)}}},[t._v("删除")]),t._v(" "),"running"==a.row.task_status?e("el-button",{staticClass:"btn1",attrs:{type:"danger",size:"small"},on:{click:function(e){t.stopTask(a.row.task_id)}}},[t._v("停止")]):e("el-button",{staticClass:"btn1",attrs:{type:"success",size:"small"},on:{click:function(e){t.startTask(a.row.task_id)}}},[t._v("启动")])]}}])})],1),t._v(" "),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"current-page":t.currentPage,layout:"prev, pager, next",total:t.pageTotal},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),e("el-dialog",{staticClass:"digcont",attrs:{title:"添加计划任务",visible:t.dialogFormVisible},on:{"update:visible":function(a){t.dialogFormVisible=a}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[e("el-form-item",{attrs:{label:"每天",prop:"task_exce_time",inline:!0,"label-width":t.formLabelWidth}},[e("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"请选择执行时间"},model:{value:t.form.task_exce_time,callback:function(a){t.$set(t.form,"task_exce_time",a)},expression:"form.task_exce_time"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"选择计划任务",prop:"task_plan_script"}},[e("el-select",{staticClass:"inp180",attrs:{placeholder:"请选择计划任务"},model:{value:t.form.task_plan_script,callback:function(a){t.$set(t.form,"task_plan_script",a)},expression:"form.task_plan_script"}},t._l(t.download_file_list,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}))],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogFormVisible=!1}}},[t._v("退 出")]),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(a){t.saveAdd("form")}}},[t._v("添 加")])],1)],1)],1)},staticRenderFns:[]}}});