webpackJsonp([9],{524:function(t,e,a){a(904),a(906);var o=a(200)(a(908),a(909),null,null);t.exports=o.exports},904:function(t,e,a){var o=a(905);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(199)("5eabfa0c",o,!0)},905:function(t,e,a){e=t.exports=a(88)(!1),e.push([t.i,".vue-datasource *{box-sizing:border-box;font-size:14px}.vue-datasource .panel{margin-bottom:22px;background-color:#fff;border:1px solid transparent;border-radius:4px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.vue-datasource .panel-default{border-color:#d3e0e9}.vue-datasource .panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-right-radius:3px;border-top-left-radius:3px}.vue-datasource .panel-default>.panel-heading{height:56px;color:#333;background-color:#fff;border-color:#d3e0e9}.vue-datasource .pull-left{float:left!important}.vue-datasource .pull-right{float:right!important}.vue-datasource .form-group{margin-bottom:15px}.vue-datasource label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}.vue-datasource .form-control{display:block;width:100%;height:36px;color:#555;background-color:#fff;border:1px solid #ccd0d2;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.vue-datasource .btn,.vue-datasource .form-control{padding:6px 12px;font-size:14px;line-height:1.6;background-image:none}.vue-datasource .btn{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;touch-action:manipulation;cursor:pointer;border:1px solid transparent;white-space:nowrap;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vue-datasource .btn-primary{color:#fff;background-color:#3097d1;border-color:#2a88bd}.vue-datasource .table{width:100%;max-width:100%;margin-bottom:22px;border-collapse:collapse;border-spacing:0;text-align:center}.vue-datasource .table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.vue-datasource .table td,.vue-datasource .table th{padding:8px;line-height:1.6;vertical-align:top;border-top:1px solid #ddd}.vue-datasource .table-striped>tbody>tr:nth-of-type(odd){background-color:#f9f9f9}.vue-datasource .success td,.vue-datasource .success th{background-color:#dff0d8}.vue-datasource .pagination{display:inline-block;padding-left:0;margin:22px 0;border-radius:4px}.vue-datasource .pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;line-height:1.6;text-decoration:none;color:#3097d1;background-color:#fff;border:1px solid #ddd;margin-left:-1px}.pagination>.disabled>a,.pagination>.disabled>a:focus,.pagination>.disabled>a:hover,.pagination>.disabled>span,.pagination>.disabled>span:focus,.pagination>.disabled>span:hover{color:#777;background-color:#fff;border-color:#ddd;cursor:not-allowed}.pagination>.active>a,.pagination>.active>a:focus,.pagination>.active>a:hover,.pagination>.active>span,.pagination>.active>span:focus,.pagination>.active>span:hover{z-index:3;color:#fff;background-color:#3097d1;border-color:#3097d1;cursor:default}.vue-datasource .pagination>li:first-child>a,.vue-datasource .pagination>li:first-child>span{margin-left:0;border-bottom-left-radius:4px;border-top-left-radius:4px}.vue-datasource .text-center{text-align:center}@media (min-width:768px){.form-inline .form-group{display:inline-block}.form-inline .control-label,.form-inline .form-group{margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}}",""])},906:function(t,e,a){var o=a(907);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(199)("4de5cb66",o,!0)},907:function(t,e,a){e=t.exports=a(88)(!1),e.push([t.i,".rad-group{margin-bottom:20px}.handle-input{width:300px;display:inline-block}.handle-box2{display:inline-block;float:right}.orange{color:#eb9e05;background-color:inherit}.btn2{margin-bottom:5px;margin-left:0}.diainp{width:217px}.diainp2{width:400px}.inp80{width:80px}.inp100{width:100px}.inp120{width:120px}.inp150{width:140px}.inp160{width:160px}.inp180{width:180px}.nowrap{white-space:nowrap}.upload-demo .el-upload{cursor:pointer;position:relative;overflow:hidden}.upload-demo .el-upload:hover{border-color:#409eff}",""])},908:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{dialogFormVisible:!1,radio3:"全部",user_type:1,form:{task_id:"",task_status:"",strategy_name:"",stock_ktype:"",stock_range:""},rules0:{start_time:[{required:!0,message:"请输入开始时间",trigger:"blur"}],end_time:[{required:!0,message:"请输入结束时间",trigger:"blur"}]},log:{message:""},formLabelWidth:"100px",formLabelWidth50:"50px",updateTimer:"",loading:!1,fullscreenLoading:!1,task_list:[],strategy_file_list:[],pageTotal:1,currentPage:1,page_size:10}},created:function(){this.user_type=localStorage.getItem("user_type"),this.getTaskList(1,this.page_size),this.getPickStrategyList()},methods:{getTaskList:function(t,e,a){var o=this,i={filter:a,page_size:e,current_page:t};o.loading=!0,o.$axios.post("/api/pick/stock/task/list",i).then(function(t){o.loading=!1,0==t.data.ret_code?(o.task_list=t.data.extra.slice(0,10),o.pageTotal=t.data.total):o.task_list=[]})},getTaskStatusById:function(t){var e=this,a={task_id:t};e.loading=!0,e.$axios.post("/api/pick/stock/task/status",a).then(function(a){if(e.loading=!1,0==a.data.ret_code){for(var o=a.data.extra,i=0;i<o.length&&"finish"==o[i].task_status;i++);if(i==o.length){for(var i=0;i<e.task_list.length;i++)e.task_list[i].task_id==t&&(e.task_list[i].task_status="finish");return}}e.updateTimer=setTimeout(function(){e.getTaskStatusById(t)},1e4)})},getPickStrategyList:function(){var t=this,e={file_type:"select",user_account:localStorage.getItem("user_account")};t.loading=!0,t.$axios.post("/api/pick/stock/strategy/list",{filter:e}).then(function(e){t.loading=!1,0==e.data.ret_code?t.strategy_file_list=e.data.extra:console.log("resp:",e.data)})},saveAdd:function(t){var e=this,a={strategy_name:this.form.strategy_name,stock_ktype:this.form.stock_ktype,stock_range:this.form.stock_range};e.loading=!0,e.$axios.post("/api/pick/stock/add",a).then(function(t){e.loading=!1,0==t.data.ret_code?(e.dialogFormVisible=!1,e.getTaskList(e.currentPage,e.page_size)):console.log("resp:",t.data)})},delTask:function(t){var e=this,a={task_id:t};e.loading=!0,e.$axios.post("/api/pick/stock/del",a).then(function(t){e.loading=!1,0==t.data.ret_code?(e.$message("删除成功"),e.getTaskList(e.currentPage,e.page_size)):e.$message(t.data.extra)},function(t){e.$message("删除失败"),e.loading=!1,console.log(t)})},startTask:function(t){var e=this,a={task_id:t};e.loading=!0,e.$axios.post("/api/pick/stock/start",a).then(function(a){e.loading=!1,0==a.data.ret_code?(e.$message("操作成功"),e.getTaskList(e.currentPage,e.page_size),e.updateTimer=setTimeout(function(){e.getTaskStatusById(t)},2e3)):e.$message(a.data.extra)},function(t){e.$message("操作失败"),e.loading=!1,console.log(t)})},stopTask:function(t){var e=this,a={task_id:t};e.loading=!0,e.$axios.post("/api/pick/stock/stop",a).then(function(t){e.loading=!1,0==t.data.ret_code?(e.$message("操作成功"),e.getTaskList(e.currentPage,e.page_size),clearTimeout(e.updateTimer)):e.$message(t.data.extra)},function(t){e.$message("操作失败"),e.loading=!1,console.log(t)})},page_forward:function(t){this.$router.push({name:"PickstockResult",params:{task_id:t}})},handleCurrentChange:function(t){this.currentPage=t,this.getTaskList(this.currentPage,this.page_size)}},computed:{}}},909:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-star-on"}),t._v("选股任务管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("选股任务列表")])],1)],1),t._v(" "),a("div",{staticClass:"handle-box rad-group"},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("创建选股任务")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.task_list,border:""}},[a("el-table-column",{attrs:{prop:"task_id",label:"任务ID",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stock_range",label:"选股范围"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stock_ktype",label:"K线类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"strategy_name",label:"选股策略",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"task_status",label:"运行状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"btn1",attrs:{type:"text",size:"small"},on:{click:function(a){t.delTask(e.row.task_id)}}},[t._v("删除")]),t._v(" "),"running"==e.row.task_status?a("el-button",{staticClass:"btn1",attrs:{type:"danger",size:"small"},on:{click:function(a){t.stopTask(e.row.task_id)}}},[t._v("停止")]):a("el-button",{staticClass:"btn1",attrs:{type:"success",size:"small"},on:{click:function(a){t.startTask(e.row.task_id)}}},[t._v("启动")]),t._v(" "),a("el-button",{staticClass:"btn1",attrs:{type:"text",size:"small"},on:{click:function(a){t.page_forward(e.row.task_id)}}},[t._v("查看结果")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,layout:"prev, pager, next",total:t.pageTotal},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{staticClass:"digcont",attrs:{title:"添加选股任务",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules0,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"选股范围"}},[a("el-select",{staticClass:"inp180",attrs:{placeholder:"请选择范围"},model:{value:t.form.stock_range,callback:function(e){t.$set(t.form,"stock_range",e)},expression:"form.stock_range"}},[a("el-option",{attrs:{label:"上海市场",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"深圳市场",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"A股全部",value:"3"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"K 线周期"}},[a("el-select",{staticClass:"inp180",attrs:{placeholder:"请选择K线周期"},model:{value:t.form.stock_ktype,callback:function(e){t.$set(t.form,"stock_ktype",e)},expression:"form.stock_ktype"}},[a("el-option",{attrs:{label:"1分钟",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"5分钟",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"15分钟",value:"15"}}),t._v(" "),a("el-option",{attrs:{label:"30分钟",value:"30"}}),t._v(" "),a("el-option",{attrs:{label:"60分钟",value:"60"}}),t._v(" "),a("el-option",{attrs:{label:"120分钟",value:"120"}}),t._v(" "),a("el-option",{attrs:{label:"日线",value:"day"}}),t._v(" "),a("el-option",{attrs:{label:"周线",value:"week"}}),t._v(" "),a("el-option",{attrs:{label:"月线",value:"month"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"选择策略",prop:"strategy_name"}},[a("el-select",{staticClass:"inp180",attrs:{placeholder:"请选择对应策略"},model:{value:t.form.strategy_name,callback:function(e){t.$set(t.form,"strategy_name",e)},expression:"form.strategy_name"}},t._l(t.strategy_file_list,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(e){t.saveAdd("form")}}},[t._v("开始选股 ")])],1)],1)],1)],1)},staticRenderFns:[]}}});